<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Wallets</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link rel="manifest" href="manifest.json">
  <script type="module" src="firebase-config.js"></script>
  <meta name="theme-color" content="#a64fff">
  <style>
    body { font-family: 'Inter', sans-serif; }
  </style>
  <script>
    // Force cache refresh
    if (typeof console !== 'undefined') { console.log = function () {}; }
    function goBack() { window.location.href = '1.html'; }
    
    // Function to open Telegram settings
    function openTelegramSettings() {
        try {
            window.location.href = 'telegram-settings.html';
        } catch (error) {
            console.error('❌ Error abriendo configuración de Telegram:', error);
        }
    }
    
    // Logout function
    async function handleLogout() {
      if (confirm('¿Estás seguro de que quieres cerrar sesión?')) {
        try {
          // Clear user data from localStorage
          localStorage.removeItem('userEmail');
          localStorage.removeItem('userId');
          
          // Try Firebase logout if available
          if (window.FirebaseService) {
            const firebaseService = new window.FirebaseService();
            await firebaseService.signOut();
          }
          
          // Redirect to login page
          window.location.href = 'login.html';
        } catch (error) {
          // Even if Firebase fails, still redirect
          window.location.href = 'login.html';
        }
      }
    }

    // Clear all cache function
    function clearAllCache() {
      if (confirm('¿Estás seguro de que quieres limpiar todo el cache? Esto recargará la página.')) {
        try {
          // Clear localStorage
          localStorage.clear();
          console.log('✅ localStorage limpiado');
          
          // Clear sessionStorage
          sessionStorage.clear();
          console.log('✅ sessionStorage limpiado');
          
          // Clear service worker cache
          if ('caches' in window) {
            caches.keys().then(function(names) {
              for (let name of names) {
                caches.delete(name);
                console.log('✅ Cache eliminado:', name);
              }
            });
          }
          
          // Clear IndexedDB (if exists)
          if ('indexedDB' in window) {
            indexedDB.databases().then(databases => {
              databases.forEach(db => {
                indexedDB.deleteDatabase(db.name);
                console.log('✅ IndexedDB eliminado:', db.name);
              });
            });
          }
          
          // Show success message
          alert('Cache limpiado correctamente. Recargando página...');
          
          // Force reload
          setTimeout(() => {
            location.reload(true);
          }, 1000);
          
        } catch (error) {
          console.error('❌ Error limpiando cache:', error);
          alert('Error limpiando cache: ' + error.message);
        }
      }
    }
    
    // Add event listeners when page loads
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('logoutBtn').addEventListener('click', handleLogout);
      document.getElementById('clearCacheBtn').addEventListener('click', clearAllCache);
    });
  </script>
</head>
<body class="bg-[#0f1618] text-white min-h-screen flex flex-col">
  <!-- Top bar -->
  <header class="bg-gradient-to-r from-[#a64fff] to-[#8a2aff] p-4 flex items-center justify-between">
   <div class="flex items-center">
    <div class="flex flex-col">
     <h1 class="text-white text-lg font-normal">
      Overview:
      <span class="font-bold">
       My Household
      </span>
      <i class="fas fa-chevron-down ml-1">
      </i>
     </h1>
            <span class="text-xs text-gray-400">v2.13.0 - Wallet Balance Input</span>
    </div>
   </div>
   <div class="flex items-center space-x-4">
    <button id="telegramBtn" aria-label="Telegram Settings" class="text-white text-2xl hover:text-gray-300 transition-colors" title="Configuración Telegram" onclick="openTelegramSettings()">
     <i class="fab fa-telegram">
     </i>
    </button>
    <button id="logoutBtn" aria-label="Logout" class="text-white text-2xl hover:text-gray-300 transition-colors" title="Cerrar Sesión">
     <i class="fas fa-sign-out-alt">
     </i>
    </button>
    <button id="clearCacheBtn" aria-label="Clear Cache" class="text-white text-2xl hover:text-gray-300 transition-colors" title="Limpiar Cache">
     <i class="fas fa-broom">
     </i>
    </button>
   </div>
  </header>

  <!-- Contenido centrado al ancho usado en 1.html -->
  <main class="flex-1 w-full">
  <div class="max-w-xl mx-auto px-4 py-6 space-y-4">
    <div class="text-center mb-2">
      <div class="text-xs tracking-[0.3em] opacity-70">WALLETS</div>
      <div class="mt-1 text-4xl sm:text-5xl font-extrabold">Q 1,940</div>
      <div class="mt-1 text-xs tracking-[0.3em] opacity-60">TOTAL NET WORTH</div>
    </div>

    <div class="bg-[#21282b] rounded-2xl shadow-xl p-5 flex items-center justify-between">
      <div>
        <div class="text-xs tracking-[0.3em] opacity-60">CASH</div>
        <div class="mt-1 text-4xl font-extrabold">-Q 35</div>
      </div>
      <div class="w-16 h-16 rounded-2xl bg-yellow-500/90 flex items-center justify-center shadow-lg">
        <i class="fas fa-money-bill-wave text-white text-2xl"></i>
      </div>
    </div>

    <div class="bg-[#21282b] rounded-2xl shadow-xl p-5 flex items-center justify-between">
      <div>
        <div class="text-xs tracking-[0.3em] opacity-60">AHORROS - GYT</div>
        <div class="mt-1 text-4xl font-extrabold">Q 0</div>
      </div>
      <div class="w-16 h-16 rounded-2xl bg-red-500/90 flex items-center justify-center shadow-lg">
        <i class="fas fa-piggy-bank text-white text-2xl"></i>
      </div>
    </div>

    <div class="bg-[#21282b] rounded-2xl shadow-xl p-5 flex items-center justify-between">
      <div>
        <div class="text-xs tracking-[0.3em] opacity-60">DIARIO</div>
        <div class="mt-1 text-4xl font-extrabold">Q 1,975</div>
      </div>
      <div class="w-16 h-16 rounded-2xl bg-blue-500/90 flex items-center justify-center shadow-lg">
        <i class="fas fa-wallet text-white text-2xl"></i>
      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="max-w-xl mx-auto px-4 mt-6 mb-6 grid grid-cols-2 gap-6">
    <button onclick="window.location.href='create-wallet.html'" class="bg-white/10 hover:bg-white/20 transition rounded-full py-6 flex flex-col items-center">
      <div class="w-16 h-16 rounded-full bg-white text-black flex items-center justify-center shadow">
        <i class="fas fa-plus text-2xl"></i>
      </div>
      <div class="mt-3 text-sm">New wallet</div>
    </button>
    <button class="bg-white/10 hover:bg-white/20 transition rounded-full py-6 flex flex-col items-center">
      <div class="w-16 h-16 rounded-full bg-white text-black flex items-center justify-center shadow">
        <i class="fas fa-exchange-alt text-2xl"></i>
      </div>
      <div class="mt-3 text-sm">Make a transfer</div>
    </button>
  </div>
  </main>

  <!-- Footer/nav (alineado al de 1.html) -->
  <footer class="border-t border-white/10 py-3 px-6 text-sm">
    <div class="flex justify-between text-white/70">
      <a href="1.html" class="flex flex-col items-center hover:opacity-100">
        <i class="far fa-eye"></i>
        <span class="mt-1 text-xs">Overview</span>
      </a>
      <a href="#" class="flex flex-col items-center opacity-60 cursor-default">
        <i class="fas fa-chart-pie"></i>
        <span class="mt-1 text-xs">Budget</span>
      </a>
      <a href="wallets.html" class="flex flex-col items-center text-pink-400">
        <i class="fas fa-wallet"></i>
        <span class="mt-1 text-xs">Wallets</span>
      </a>
      <a href="#" class="flex flex-col items-center opacity-60 cursor-default">
        <i class="fas fa-toolbox"></i>
        <span class="mt-1 text-xs">Tools</span>
      </a>
    </div>
  </footer>
</body>
</html>


